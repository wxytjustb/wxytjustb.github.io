"use strict";(self.webpackChunkroky_wang=self.webpackChunkroky_wang||[]).push([[5630],{6578:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=t(4848),o=t(8453);const r={},i=void 0,a={id:"AIGC/study",title:"study",description:"Embedding",source:"@site/docs/AIGC/study.md",sourceDirName:"AIGC",slug:"/AIGC/study",permalink:"/en/docs/AIGC/study",draft:!1,unlisted:!1,editUrl:"https://github.com/wxytjustb/rokywang/tree/main/docs/AIGC/study.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"robot",permalink:"/en/docs/AIGC/robot"},next:{title:"Database",permalink:"/en/docs/category/database"}},d={},c=[{value:"Embedding",id:"embedding",level:3},{value:"Completion",id:"completion",level:3},{value:"ChatCompletion",id:"chatcompletion",level:3},{value:"llama_index\u6269\u5c55",id:"llama_index\u6269\u5c55",level:3}];function l(n){const e={code:"code",h3:"h3",img:"img",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:"embedding",children:"Embedding"}),"\n",(0,s.jsx)(e.h3,{id:"completion",children:"Completion"}),"\n",(0,s.jsxs)(e.p,{children:["\u201c\u7ed9\u4e00\u4e2a\u4efb\u52a1\u63cf\u8ff0\u3001\u7ed9\u5c11\u6570\u51e0\u4e2a\u4f8b\u5b50\u3001\u7ed9\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\u201d\u8fd9\u6837\u4e09\u4e2a\u6b65\u9aa4\u7684\u7ec4\u5408\uff0c\u4e5f\u662f\u5927\u8bed\u8a00\u6a21\u578b\u91cc\u4f7f\u7528\u63d0\u793a\u8bed\u7684\u5e38\u89c1\u5957\u8def\u3002\u4e00\u822c\u6211\u4eec\u79f0\u4e4b\u4e3a ",(0,s.jsx)(e.strong,{children:"Few-Shots Learning\uff08\u5c11\u6837\u672c\u5b66\u4e60\uff09"}),"\uff0c\u4e5f\u5c31\u662f\u7ed9\u4e00\u4e2a\u6216\u8005\u5c11\u6570\u51e0\u4e2a\u4f8b\u5b50\uff0cAI \u5c31\u80fd\u591f\u4e3e\u4e00\u53cd\u4e09\uff0c\u56de\u7b54\u6211\u4eec\u7684\u95ee\u9898\u3002"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'from openai import OpenAI\nimport os\n\nclient = OpenAI(api_key = os.environ.get("OPENAI_API_KEY"))\n\nCOMPLETION_MODEL = "gpt-3.5-turbo-instruct" # "text-davinci-003"\u57282024\u5e741\u67084\u53f7\u4ee5\u540e\u4e0b\u7ebf\n\n\ndef get_response(prompt, temperature = 1.0, stop=None):\n    completions = client.completions.create (\n        model=COMPLETION_MODEL,\n        prompt=prompt,\n        max_tokens=1024,\n        n=1,\n        stop=stop,\n        temperature=temperature,        \n    )\n    message = completions.choices[0].text\n    return message\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:'prompts = """\u5224\u65ad\u4e00\u4e0b\u7528\u6237\u7684\u8bc4\u8bba\u60c5\u611f\u4e0a\u662f\u6b63\u9762\u7684\u8fd8\u662f\u8d1f\u9762\u7684\n\u8bc4\u8bba\uff1a\u4e70\u7684\u94f6\u8272\u7248\u771f\u7684\u5f88\u597d\u770b\uff0c\u4e00\u5929\u5c31\u5230\u4e86\uff0c\u665a\u4e0a\u5c31\u5f00\u59cb\u62ff\u8d77\u6765\u5b8c\u7cfb\u7edf\u5f88\u4e1d\u6ed1\u6d41\u7545\uff0c\u505a\u5de5\u624e\u5b9e\uff0c\u624b\u611f\u7ec6\u817b\uff0c\u5f88\u7cbe\u81f4\u54e6\u82f9\u679c\u4e00\u5982\u65e2\u5f80\u7684\u597d\u54c1\u8d28\n\u60c5\u611f\uff1a\u6b63\u9762\n\n\u8bc4\u8bba\uff1a\u968f\u610f\u964d\u4ef7\uff0c\u4e0d\u4e88\u4ef7\u4fdd\uff0c\u670d\u52a1\u6001\u5ea6\u5dee\n\u60c5\u611f\uff1a\u8d1f\u9762\n"""\n\ngood_case = prompts + """\n\u8bc4\u8bba\uff1a\u5916\u5f62\u5916\u89c2\uff1a\u82f9\u679c\u5ba1\u7f8e\u4e00\u76f4\u5f88\u597d\uff0c\u91d1\u8272\u975e\u5e38\u6f02\u4eae\n\u62cd\u7167\u6548\u679c\uff1a14pro\u5347\u7ea7\u76844800\u4e07\u50cf\u7d20\u771f\u7684\u662f\u6ca1\u7684\u8bf4\uff0c\u592a\u597d\u4e86\uff0c\n\u8fd0\u884c\u901f\u5ea6\uff1a\u82f9\u679c\u7684\u53cd\u5e94\u901f\u5ea6\u597d\uff0c\u7528\u4e0a\u4e09\u4e94\u5e74\u4e5f\u4e0d\u4f1a\u5361\u987f\u7684\uff0c\u4e4b\u524d\u76847P\u7528\u5230\u73b0\u5728\u4e5f\u4e0d\u5361\n\u5176\u4ed6\u7279\u8272\uff1a14pro\u7684\u78e8\u7802\u91d1\u771f\u7684\u592a\u597d\u770b\u4e86\uff0c\u4e0d\u592a\u9ad8\u8c03\uff0c\u4e5f\u4e0d\u81f3\u4e8e\u6ca1\u6709\u7279\u70b9\uff0c\u975e\u5e38\u8010\u770b\uff0c\u5f88\u597d\u7684\n\u60c5\u611f\uff1a\n"""\n\nprint(get_response(good_case))\n'})}),"\n",(0,s.jsx)(e.h3,{id:"chatcompletion",children:"ChatCompletion"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'import openai\nopenai.ChatCompletion.create(\n  model="gpt-3.5-turbo",\n  messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "Who won the world series in 2020?"},\n        {"role": "assistant", "content": "The Los Angeles Dodgers won the World Series in 2020."},\n        {"role": "user", "content": "Where was it played?"}\n    ]\n)\n\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'history = """User : \u4f60\u662f\u8c01\uff1f\nAssistant : \u6211\u662f\u4e00\u4e2a\u4eba\u5de5\u667a\u80fd\u8bed\u8a00\u6a21\u578b\uff0c\u53ef\u4ee5\u56de\u7b54\u5404\u79cd\u95ee\u9898\uff0c\u5305\u62ec\u505a\u83dc\u7684\u95ee\u9898\u3002\n\nUser : \u8bf7\u95ee\u9c7c\u9999\u8089\u4e1d\u600e\u4e48\u505a\uff1f\nAssistant : \u9c7c\u9999\u8089\u4e1d\u7684\u505a\u6cd5\uff1a\n\n1. \u732a\u91cc\u810a\u8089\u5207\u4e1d\uff0c\u52a0\u5165\u76d0\u3001\u6dc0\u7c89\u3001\u6599\u9152\u6405\u62cc\u5747\u5300\uff0c\u814c\u523610\u5206\u949f\n2. \u80e1\u841d\u535c\u3001\u9752\u6912\u3001\u6728\u8033\u5207\u4e1d\u5907\u7528\n3. \u70ed\u9505\u51c9\u6cb9\uff0c\u653e\u5165\u849c\u672b\u3001\u59dc\u672b\u7178\u7092\u51fa\u9999\u5473\uff0c\u52a0\u5165\u8089\u4e1d\u7ffb\u7092\u81f3\u53d8\u8272\n4. \u52a0\u5165\u80e1\u841d\u535c\u3001\u9752\u6912\u3001\u6728\u8033\u7ffb\u7092\uff0c\u52a0\u5165\u9171\u6cb9\u3001\u7cd6\u3001\u918b\u3001\u76d0\u3001\u5473\u7cbe\u3001\u6c34\u6dc0\u7c89\u6405\u62cc\u5747\u5300\uff0c\u5012\u5165\u9505\u4e2d\u7ffb\u7092\u5747\u5300\u5373\u53ef\u3002\n\n\u63d0\u793a\uff1a\u9c7c\u9999\u8089\u4e1d\u7684\u5173\u952e\u662f\u8c03\u6599\u7684\u914d\u6bd4\uff0c\u9171\u6cb9\u3001\u7cd6\u3001\u918b\u3001\u76d0\u3001\u5473\u7cbe\u7684\u6bd4\u4f8b\u8981\u9002\u5408\u81ea\u5df1\u7684\u53e3\u5473\u3002\n\nUser : \u90a3\u869d\u6cb9\u725b\u8089\u5462\uff1f\nAssistant : \u869d\u6cb9\u725b\u8089\u7684\u505a\u6cd5\uff1a\n\n1. \u5c06\u725b\u8089\u5207\u6210\u8584\u7247\uff0c\u52a0\u5165\u76d0\u3001\u6dc0\u7c89\u3001\u6599\u9152\u814c\u523610\u5206\u949f\n2. \u8471\u59dc\u5207\u672b\uff0c\u849c\u5207\u7247\uff0c\u9752\u7ea2\u6912\u5207\u4e1d\u5907\u7528\n3. \u70ed\u9505\u51c9\u6cb9\uff0c\u653e\u5165\u8471\u59dc\u672b\u3001\u849c\u7247\u7178\u7092\u51fa\u9999\u5473\uff0c\u52a0\u5165\u725b\u8089\u7ffb\u7092\u81f3\u53d8\u8272\n4. \u52a0\u5165\u869d\u6cb9\u3001\u9171\u6cb9\u3001\u7cd6\u3001\u6c34\u6dc0\u7c89\u8c03\u5473\uff0c\u52a0\u5165\u9752\u7ea2\u6912\u7ffb\u7092\u5747\u5300\u5373\u53ef\u3002\n\n\u63d0\u793a\uff1a\u869d\u6cb9\u725b\u8089\u7684\u5173\u952e\u662f\u725b\u8089\u8981\u5207\u8584\uff0c\u7ffb\u7092\u65f6\u706b\u5019\u8981\u5feb\uff0c\u4fdd\u8bc1\u725b\u8089\u53e3\u611f\u9c9c\u5ae9\u3002\u8c03\u5473\u65f6\uff0c\u869d\u6cb9\u548c\u9171\u6cb9\u7684\u6bd4\u4f8b\u4e5f\u8981\u9002\u5408\u81ea\u5df1\u7684\u53e3\u5473\u3002\n"""\n\ndef summarize(text, max_tokens=200):\n    response = openai.Completion.create(\n        model=COMPLETIONS_MODEL,\n        prompt=text + "\\n\\n\u8bf7\u603b\u7ed3\u4e00\u4e0b\u4e0a\u9762User\u548cAssistant\u804a\u4e86\u4e9b\u4ec0\u4e48\uff1a\\n",\n        max_tokens=max_tokens,\n    )\n    return response["choices"][0]["text"]\n\nsummarized = summarize(history)\nprint(summarized)\n\n'})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:'prompt = summarized + "\\n\\n\u8bf7\u4f60\u6839\u636e\u5df2\u7ecf\u804a\u4e86\u7684\u5185\u5bb9\uff0c\u7ee7\u7eed\u5bf9\u8bdd\uff1a"\nconversation = Conversation(prompt, 5)\n\nquestion = "\u90a3\u5bab\u4fdd\u9e21\u4e01\u5462\uff1f"\nanswer = conversation.ask(question)\nprint("User : %s" % question)\nprint("Assistant : %s\\n" % answer)\n'})}),"\n",(0,s.jsx)(e.h3,{id:"llama_index\u6269\u5c55",children:"llama_index\u6269\u5c55"}),"\n",(0,s.jsx)(e.p,{children:"llama-index \u5176\u5b9e\u7ed9\u51fa\u4e86\u4e00\u79cd\u4f7f\u7528\u5927\u8bed\u8a00\u6a21\u578b\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u88ab\u79f0\u4e4b\u4e3a\u201c\u7b2c\u4e8c\u5927\u8111\u201d\u6a21\u5f0f\u3002\u901a\u8fc7\u5148\u5c06\u5916\u90e8\u7684\u8d44\u6599\u5e93\u7d22\u5f15\uff0c\u7136\u540e\u6bcf\u6b21\u63d0\u95ee\u7684\u65f6\u5019\uff0c\u5148\u4ece\u8d44\u6599\u5e93\u91cc\u901a\u8fc7\u641c\u7d22\u627e\u5230\u6709\u76f8\u5173\u6027\u7684\u6750\u6599\uff0c\u7136\u540e\u518d\u901a\u8fc7 AI \u7684\u8bed\u4e49\u7406\u89e3\u80fd\u529b\u8ba9 AI \u57fa\u4e8e\u641c\u7d22\u5230\u7684\u7ed3\u679c\u6765\u56de\u7b54\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{alt:"image-20240122191059850",src:t(5505).A+"",width:"1778",height:"1228"})}),"\n",(0,s.jsx)(e.p,{children:"Gradio"}),"\n",(0,s.jsx)(e.p,{children:"\u901a\u8fc7Gradio\u5c01\u88c5\u73b0\u6210\u7684\u673a\u5668\u4eba"})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(l,{...n})}):l(n)}},5505:(n,e,t)=>{t.d(e,{A:()=>s});const s=t.p+"assets/images/image-20240122191059850-edc6e5d96f6672db23e1d50e5411f8fc.png"},8453:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>a});var s=t(6540);const o={},r=s.createContext(o);function i(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);